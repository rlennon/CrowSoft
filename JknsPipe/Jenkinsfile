pipeline {
  agent any
  stages {
    stage('Checkout code') {
	  	steps {
			echo 'This step checks out SCM code.'
		  	checkout scm				
				}
			}	
	stage ('Build MVC'){
		steps {
			echo '>>>>>> MSBuild <<<<<<<<<<<<<<'
			 //cd /Projects/crowsoftmvc
			 //dotnet build
			}
		}
		
	stage ('Build Unit Test') {
		steps {
			echo '>>>>>>  Unit Test <<<<<<<<<<<<<<'
			//Projects/crowsoft_unittests\bin\nunit-console.exe /xml=nunit-result.xml
			//cd /Projects/crowsoft_unittests
			//dotnet test
			}
		}
		
    stage ('Run Selenium Test') {
	  	steps {
		  	echo 'echo '>>>>>>Selenium Test<<<<<<<<<<<<<<'	
			}
		}	
		
	 stage('Stop app') {
	  	steps {	
			echo '>>>>>> Stop App  <<<<<<<<<<<<<<'
			ssh label: '', script: '''ansible devadmin@172.28.25.133 -a "sudo systemctl stop crowsoft-webapp.service" '''
			}
 		}
				
	 
	stage('Startapp') {
	  	steps {
			echo '>>>>>> StartApp  <<<<<<<<<<<<<<'
			sh label: '', script: 'ansible devadmin@172.28.25.133 -a "sudo systemctl start crowsoft-webapp.service"' 				
			}
		}
	}
}




