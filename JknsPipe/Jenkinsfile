pipeline {
  agent any
  stages {
    stage('Checkout code') {
	  	steps {
		  	checkout scm				
				}
			}	
    stage('Run NUnit Test') {
	  	steps {
		  		echo 'Nunit test will go in here'			
				}
			}	
		
    stage('Upload to Artifactory') {
	  	steps {
		  		echo 'Artifactory will go in here'			
				}
			}	
	 stage('Stop app') {
	  	steps {
				sshagent(credentials : ['8a782e52-5865-4de2-b63a-2d3ce5bec5a5']) {
				sh label: '', script: '''ssh devadmin@172.28.25.133'''
				sh label: '', script: ' sudo  systemctl stop crowsoft-webapp.service'	
					}
		  				
				}
			}	
	 
	stage('Startapp') {
	  	steps {
		  	sh label: '', script: 'sudo systemctl start crowsoft-webapp.service'				
				}
			}	
	  }


 }

