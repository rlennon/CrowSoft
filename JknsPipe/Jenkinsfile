pipeline {
  agent any
  stages {
    stage('Checkout code') {
	  	steps {
		  	checkout scm				
				}
			}	
    stage('Run NUnit Test') {
	  	steps {
		  		echo 'Nunit test will go in here'			
				}
			}	
		
    stage('Upload to Artifactory') {
	  	steps {
		  		echo 'Artifactory will go in here'			
				}
			}	
	 stage('Stop app') {
	  	steps {
				sshagent(credentials : ['dev']) {
				 sh ( script:"""
						sudo  systemctl stop crowsoft-webapp.service
					""")
					}
		  				
				}
			}	
	 
	stage('Startapp') {
	  	steps {
		  	sh label: '', script: 'sudo systemctl start crowsoft-webapp.service'				
				}
			}	
	  }


 }

